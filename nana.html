<!DOCTYPE html>
<html>
<body style="margin:0;background:#111;color:white;text-align:center;font-family:monospace">
<h2>Mage Game üßô‚Äç‚ôÇÔ∏è</h2>
<canvas id="c" width="600" height="400" style="background:#222"></canvas>

<script>
const ctx=c.getContext("2d");
let p={x:300,y:200,hp:100},keys={},shots=[],enemies=[];
let mouse={x:0,y:0,down:false};

document.addEventListener("keydown",e=>keys[e.key]=true);
document.addEventListener("keyup",e=>keys[e.key]=false);
c.addEventListener("mousemove",e=>{let r=c.getBoundingClientRect();mouse.x=e.clientX-r.left;mouse.y=e.clientY-r.top});
c.addEventListener("mousedown",()=>mouse.down=true);
c.addEventListener("mouseup",()=>mouse.down=false);

setInterval(()=>enemies.push({x:Math.random()*600,y:-20}),1000);

function shoot(){
  let dx=mouse.x-p.x,dy=mouse.y-p.y,l=Math.hypot(dx,dy)||1;
  shots.push({x:p.x,y:p.y,vx:dx/l*6,vy:dy/l*6});
}

function loop(){
  ctx.clearRect(0,0,600,400);

  // move
  if(keys.w)p.y-=3;if(keys.s)p.y+=3;if(keys.a)p.x-=3;if(keys.d)p.x+=3;
  if(mouse.down&&shots.length<5)shoot();

  // draw player
  ctx.font="32px serif";
  ctx.fillText("üßô‚Äç‚ôÇÔ∏è",p.x,p.y);

  // shots
  shots.forEach(s=>{
    s.x+=s.vx;s.y+=s.vy;
    ctx.fillText("üî•",s.x,s.y);
  });

  // enemies
  enemies.forEach(e=>{
    let dx=p.x-e.x,dy=p.y-e.y,l=Math.hypot(dx,dy)||1;
    e.x+=dx/l;e.y+=dy/l;
    ctx.fillText("üëæ",e.x,e.y);
    if(Math.abs(p.x-e.x)<20&&Math.abs(p.y-e.y)<20)p.hp--;
  });

  ctx.fillText("HP: "+p.hp,10,20);
  requestAnimationFrame(loop);
}
loop();
</script>
</body>
</html>
